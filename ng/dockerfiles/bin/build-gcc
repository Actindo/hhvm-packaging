#!/bin/bash
#
# Copyright (c) 2017-present, Facebook, Inc.
# All rights reserved.
#
# This source code is licensed under the BSD-style license found in the
# LICENSE file in the root directory of this source tree. An additional grant
# of patent rights can be found in the PATENTS file in the same directory.

set -ex 

cd /tmp
wget -q http://mirrors.ocf.berkeley.edu/gnu/gcc/gcc-5.5.0/gcc-5.5.0.tar.gz
tar zxf gcc-5.5.0.tar.gz

cd gcc-5.5.0
contrib/download_prerequisites

mkdir ../objdir
cd ../objdir

unset CFLAGS
unset CXXFLAGS
unset CFLAGS_FOR_BUILD
unset CXXFLAGS_FOR_BUILD
unset CFLAGS_FOR_TARGET
unset CXXFLAGS_FOR_TARGET
$(pwd)/../gcc-5.5.0/configure --enable-language=c,c++
make -j8
make install
cd /tmp
rm -rf /tmp/{gcc-5.5.0,objdir,gcc-5.5.0.tar.gz}
